name: Publish DarimarSystemWebsite
description: "Publish DarimarSystemWebsite to IIS"
inputs:
  scripts-path:
    description: "Path to the required MsDeploy PowerShell scripts"
    required: true
  offline-path:
    description: "Path to app-offline.htm"
    required: true
  publish-path:
    description: "Path to app publish folder generated by publish"
    required: true
  host-site-name:
    description: "IIS host site name"
    required: true
  server-computer-name:
    description: "IIS server computer name"
    required: true
  server-username:
    description: "IIS server username"
    required: true
  server-password:
    description: "IIS server password"
    required: true
runs:
  using: "composite"
  steps:
    - name: Stop site
      shell: pwsh
      run: >
        ${{ inputs.scripts-path }}\Stop_MsDeploy.ps1
        ${{ inputs.offline-path }}
        ${{ inputs.publish-path }}
        ${{ inputs.host-site-name }}
        ${{ inputs.server-computer-name }}
        ${{ inputs.server-username }}
        ${{ inputs.server-password }}
    - name: Waiting 10 seconds
      shell: pwsh
      run: Start-Sleep -Seconds 10
    - name: Deploy
      shell: pwsh
      run: >
        ${{ inputs.scripts-path }}\Publish_MsDeploy.ps1
        ${{ inputs.publish-path }}
        ${{ inputs.host-site-name }}
        ${{ inputs.server-computer-name }}
        ${{ inputs.server-username }}
        ${{ inputs.server-password }}
    - name: Start site
      shell: pwsh
      run: >
        ${{ inputs.scripts-path }}\Start_MsDeploy.ps1
        ${{ inputs.host-site-name }}
        ${{ inputs.server-computer-name }}
        ${{ inputs.server-username }}
        ${{ inputs.server-password }}
